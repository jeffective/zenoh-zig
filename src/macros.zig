const std = @import("std");

pub const c = @import("zenoh_c");

pub fn Moved(T: type) type {
    const converter = switch (T) {
        c.z_owned_alloc_layout_t => c.z_alloc_layout_move,
        c.z_owned_bytes_t => c.z_bytes_move,
        c.z_owned_bytes_writer_t => c.z_bytes_writer_move,
        c.z_owned_chunk_alloc_result_t => c.z_chunk_alloc_result_move,
        c.z_owned_closure_hello_t => c.z_closure_hello_move,
        c.z_owned_closure_matching_status_t => c.z_closure_matching_status_move,
        c.z_owned_closure_query_t => c.z_closure_query_move,
        c.z_owned_closure_reply_t => c.z_closure_reply_move,
        c.z_owned_closure_sample_t => c.z_closure_sample_move,
        c.z_owned_closure_zid_t => c.z_closure_zid_move,
        c.z_owned_condvar_t => c.z_condvar_move,
        c.z_owned_config_t => c.z_config_move,
        c.z_owned_encoding_t => c.z_encoding_move,
        c.z_owned_fifo_handler_query_t => c.z_fifo_handler_query_move,
        c.z_owned_fifo_handler_reply_t => c.z_fifo_handler_reply_move,
        c.z_owned_fifo_handler_sample_t => c.z_fifo_handler_sample_move,
        c.z_owned_hello_t => c.z_hello_move,
        c.z_owned_keyexpr_t => c.z_keyexpr_move,
        c.z_owned_liveliness_token_t => c.z_liveliness_token_move,
        c.z_owned_matching_listener_t => c.z_matching_listener_move,
        c.z_owned_memory_layout_t => c.z_memory_layout_move,
        c.z_owned_mutex_t => c.z_mutex_move,
        c.z_owned_publisher_t => c.z_publisher_move,
        c.z_owned_querier_t => c.z_querier_move,
        c.z_owned_query_t => c.z_query_move,
        c.z_owned_queryable_t => c.z_queryable_move,
        c.z_owned_reply_t => c.z_reply_move,
        c.z_owned_reply_err_t => c.z_reply_err_move,
        c.z_owned_ring_handler_query_t => c.z_ring_handler_query_move,
        c.z_owned_ring_handler_reply_t => c.z_ring_handler_reply_move,
        c.z_owned_ring_handler_sample_t => c.z_ring_handler_sample_move,
        c.z_owned_sample_t => c.z_sample_move,
        c.z_owned_session_t => c.z_session_move,
        c.z_owned_shm_client_t => c.z_shm_client_move,
        c.z_owned_shm_client_storage_t => c.z_shm_client_storage_move,
        c.z_owned_shm_t => c.z_shm_move,
        c.z_owned_shm_mut_t => c.z_shm_mut_move,
        c.z_owned_shm_provider_t => c.z_shm_provider_move,
        c.z_owned_slice_t => c.z_slice_move,
        c.z_owned_source_info_t => c.z_source_info_move,
        c.z_owned_string_array_t => c.z_string_array_move,
        c.z_owned_string_t => c.z_string_move,
        c.z_owned_subscriber_t => c.z_subscriber_move,
        c.z_owned_task_t => c.z_task_move,
        c.zc_owned_closure_log_t => c.zc_closure_log_move,
        c.zc_owned_concurrent_close_handle_t => c.zc_concurrent_close_handle_move,
        c.zc_owned_shm_client_list_t => c.zc_shm_client_list_move,
        c.ze_owned_advanced_publisher_t => c.ze_advanced_publisher_move,
        c.ze_owned_advanced_subscriber_t => c.ze_advanced_subscriber_move,
        c.ze_owned_closure_miss_t => c.ze_closure_miss_move,
        c.ze_owned_publication_cache_t => c.ze_publication_cache_move,
        c.ze_owned_querying_subscriber_t => c.ze_querying_subscriber_move,
        c.ze_owned_sample_miss_listener_t => c.ze_sample_miss_listener_move,
        c.ze_owned_serializer_t => c.ze_serializer_move,
        else => comptime unreachable,
    };
    return @typeInfo(@TypeOf(converter)).@"fn".return_type.?;
}

pub fn move(value: anytype) Moved(std.meta.Child(@TypeOf(value))) {
    const converter = switch (std.meta.Child(@TypeOf(value))) {
        c.z_owned_alloc_layout_t => c.z_alloc_layout_move,
        c.z_owned_bytes_t => c.z_bytes_move,
        c.z_owned_bytes_writer_t => c.z_bytes_writer_move,
        c.z_owned_chunk_alloc_result_t => c.z_chunk_alloc_result_move,
        c.z_owned_closure_hello_t => c.z_closure_hello_move,
        c.z_owned_closure_matching_status_t => c.z_closure_matching_status_move,
        c.z_owned_closure_query_t => c.z_closure_query_move,
        c.z_owned_closure_reply_t => c.z_closure_reply_move,
        c.z_owned_closure_sample_t => c.z_closure_sample_move,
        c.z_owned_closure_zid_t => c.z_closure_zid_move,
        c.z_owned_condvar_t => c.z_condvar_move,
        c.z_owned_config_t => c.z_config_move,
        c.z_owned_encoding_t => c.z_encoding_move,
        c.z_owned_fifo_handler_query_t => c.z_fifo_handler_query_move,
        c.z_owned_fifo_handler_reply_t => c.z_fifo_handler_reply_move,
        c.z_owned_fifo_handler_sample_t => c.z_fifo_handler_sample_move,
        c.z_owned_hello_t => c.z_hello_move,
        c.z_owned_keyexpr_t => c.z_keyexpr_move,
        c.z_owned_liveliness_token_t => c.z_liveliness_token_move,
        c.z_owned_matching_listener_t => c.z_matching_listener_move,
        c.z_owned_memory_layout_t => c.z_memory_layout_move,
        c.z_owned_mutex_t => c.z_mutex_move,
        c.z_owned_publisher_t => c.z_publisher_move,
        c.z_owned_querier_t => c.z_querier_move,
        c.z_owned_query_t => c.z_query_move,
        c.z_owned_queryable_t => c.z_queryable_move,
        c.z_owned_reply_t => c.z_reply_move,
        c.z_owned_reply_err_t => c.z_reply_err_move,
        c.z_owned_ring_handler_query_t => c.z_ring_handler_query_move,
        c.z_owned_ring_handler_reply_t => c.z_ring_handler_reply_move,
        c.z_owned_ring_handler_sample_t => c.z_ring_handler_sample_move,
        c.z_owned_sample_t => c.z_sample_move,
        c.z_owned_session_t => c.z_session_move,
        c.z_owned_shm_client_t => c.z_shm_client_move,
        c.z_owned_shm_client_storage_t => c.z_shm_client_storage_move,
        c.z_owned_shm_t => c.z_shm_move,
        c.z_owned_shm_mut_t => c.z_shm_mut_move,
        c.z_owned_shm_provider_t => c.z_shm_provider_move,
        c.z_owned_slice_t => c.z_slice_move,
        c.z_owned_source_info_t => c.z_source_info_move,
        c.z_owned_string_array_t => c.z_string_array_move,
        c.z_owned_string_t => c.z_string_move,
        c.z_owned_subscriber_t => c.z_subscriber_move,
        c.z_owned_task_t => c.z_task_move,
        c.zc_owned_closure_log_t => c.zc_closure_log_move,
        c.zc_owned_concurrent_close_handle_t => c.zc_concurrent_close_handle_move,
        c.zc_owned_shm_client_list_t => c.zc_shm_client_list_move,
        c.ze_owned_advanced_publisher_t => c.ze_advanced_publisher_move,
        c.ze_owned_advanced_subscriber_t => c.ze_advanced_subscriber_move,
        c.ze_owned_closure_miss_t => c.ze_closure_miss_move,
        c.ze_owned_publication_cache_t => c.ze_publication_cache_move,
        c.ze_owned_querying_subscriber_t => c.ze_querying_subscriber_move,
        c.ze_owned_sample_miss_listener_t => c.ze_sample_miss_listener_move,
        c.ze_owned_serializer_t => c.ze_serializer_move,
        else => comptime unreachable,
    };
    return converter(value);
}
